"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5066],{5002:function(e,t,n){n.d(t,{HD:function(){return h},aC:function(){return f}});var s=n(9268),a=n(3196),r=n(3328),i=n(5650),o=n(1313),l=n(4734),d=n(4890),u=n(6006),c=n(475);let p=(0,u.createContext)({user:null,isAdmin:!1,signIn:async()=>{},signOut:async()=>{}}),h=e=>{let{children:t}=e,n=(0,c.Ds)(),[h,f]=(0,u.useState)(null),[m,v]=(0,u.useState)(!1),y=(0,u.useRef)(null),g=(0,u.useRef)(null);(0,u.useEffect)(()=>{y.current=(0,l.v0)(i.Z),y.current.languageCode="ko",g.current=new l.hJ},[]),(0,a.F)(()=>{if(!y.current)return;let e=y.current.onAuthStateChanged(async e=>{if(f(e),e)try{let t=await (0,d.U2)((0,d.iH)(r.db,"admin_emails/".concat(e.uid))),s=t.exists();s?v(t.exists()):n.enqueue({message:"관리자 계정이 아닙니다. 다른 관리자에게 요청해 관리자 권한을 획득하세요. UID: ".concat(e.uid),severity:"warn",persist:!0})}catch(e){v(!1)}else v(!1)});return()=>e()},[],[n]),(0,u.useEffect)(()=>{var e;let t=(0,d.jM)((0,d.iH)(r.db,"admin_emails/".concat(null!==(e=null==h?void 0:h.uid)&&void 0!==e?e:"null")),e=>{e.exists()?v(!0):v(!1)});return()=>t()},[null==h?void 0:h.uid]);let x=async()=>{if(y.current&&g.current)try{await (0,l.Fb)(y.current,l.a$);let e=await (0,l.rh)(y.current,g.current),t=e.user;f(t),await (0,d.t8)((0,d.iH)(r.db,"users/".concat(t.uid)),{name:t.displayName,email:t.email,photoURL:t.photoURL}),n.enqueue({message:"로그인되었습니다.",severity:"success"})}catch(e){console.log(e),e instanceof o.ZR?n.enqueue({message:"로그인에 실패했습니다: ".concat(e.message),severity:"error"}):n.enqueue({message:"로그인에 실패했습니다.",severity:"error"})}},b=async()=>{if(y.current)try{await y.current.signOut(),n.enqueue({message:"로그아웃되었습니다.",severity:"success"})}catch(e){console.log(e),e instanceof o.ZR?n.enqueue({message:"로그아웃에 실패했습니다: ".concat(e.message),severity:"error"}):n.enqueue({message:"로그아웃에 실패했습니다.",severity:"error"})}};return(0,s.jsx)(p.Provider,{value:{user:h,isAdmin:m,signIn:x,signOut:b},children:t})},f=()=>(0,u.useContext)(p)},6994:function(e,t,n){n.d(t,{ek:function(){return c},st:function(){return u}});var s=n(9268),a=n(6628),r=n(3328),i=n(1555),o=n(4890),l=n(6006);let d=(0,l.createContext)({games:[],gamesLoaded:!1,freezeAt:1683963e6,setFreezeAt:()=>{},scoreboard:[]}),u=e=>{let{children:t}=e,[n,u]=(0,l.useState)(!1),[c,p]=(0,l.useState)([]),[h,f]=(0,l.useState)(!1),[m,v]=(0,l.useState)(1683963e6);(0,l.useEffect)(()=>{let e=(0,o.jM)((0,o.iH)(r.db,"games"),e=>{if(e.exists()){let t=e.toJSON();p(Object.values(t).map(e=>({...e,players:Object.values(e.players),..."result"in e?{result:Object.values(e.result)}:{}}))),u(!0)}});return()=>e()},[]),(0,l.useEffect)(()=>{let e=(0,o.jM)((0,o.iH)(r.db,"freeze"),e=>{f(!0),e.exists()&&v(e.val())});return()=>e()},[]);let y=async e=>{await (0,o.t8)((0,o.iH)(r.db,"freeze"),e)},g=(0,l.useMemo)(()=>{let e=new Map;return a.map(e=>{let{handle:t,type:n,solves:s}=e,a=c.filter(e=>e.players.includes(t)).sort((e,t)=>e.startedAt-t.startedAt),r=a.filter(e=>"finishedAt"in e==!1),o=a.filter(e=>"finishedAt"in e),l=[{type:"solves",score:50*s,solves:s,frozen:!1},...o.map(e=>{let n=e.result.find(e=>e.handle===t),s=m<e.finishedAt,a=(0,i.Gs)(e.result.length,e.durationMinutes,n.rank);return{type:"game",score:n.exclude?0:a,game:e,result:n,frozen:s}})],d=l.reduce((e,t)=>{let{score:n,frozen:s}=t;return e+(s?0:n)},0);return{handle:t,exclude:"staff"===n,score:d,scoreEntries:l,ongoingGames:r,rank:0,lastScoreUpdateTime:Math.max(0,...o.map(e=>e.finishedAt))}}).sort((e,t)=>e.score!==t.score?t.score-e.score:e.lastScoreUpdateTime-t.lastScoreUpdateTime).map((t,n)=>{var s;let a="".concat(t.score,"-").concat(t.lastScoreUpdateTime),r=null!==(s=e.get(a))&&void 0!==s?s:n+1;return e.set(a,r),{...t,rank:r}})},[m,c]);return(0,s.jsx)(d.Provider,{value:{games:n&&h?c:[],gamesLoaded:n&&h,freezeAt:m,setFreezeAt:y,scoreboard:g},children:t})},c=()=>(0,l.useContext)(d)},475:function(e,t,n){n.d(t,{wT:function(){return N},Ds:function(){return O}});var s=n(9268),a=n(2805),r=n(2120),i=n(555),o=n(3335),l=n(1835),d=n(8941),u=n(9545),c=n(5157),p=n(3244),h=n(3465),f=n(1460),m=n(6762),v=n.n(m),y=n(4086),g=n(6006),x=n(8431);function b(){let e=(0,a._)(["\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  padding-bottom: 4vh;\n  z-index: 2000000;\n  overflow: hidden;\n  pointer-events: none;\n"]);return b=function(){return e},e}function j(){let e=(0,a._)(["\n  position: relative;\n  height: 100%;\n  width: 600px;\n  max-width: 100%;\n  margin: 0 auto;\n  padding: 16px;\n"]);return j=function(){return e},e}function w(){let e=(0,a._)(["\n  width: 100%;\n  display: flex;\n  padding: 8px;\n  background: ",";\n  border-radius: 4px;\n  box-shadow: "," 0px 8px\n    16px;\n  align-items: center;\n  transition: opacity 0.3s ease, transform 0.3s ease, box-shadow 0.3s ease;\n  transform-origin: bottom;\n  transform: ",";\n  opacity: ",";\n  pointer-events: all;\n"]);return w=function(){return e},e}function k(){let e=(0,a._)(["\n  position: absolute;\n  left: 16px;\n  right: 16px;\n  bottom: 0;\n  transition: transform 0.3s ease;\n"]);return k=function(){return e},e}function I(){let e=(0,a._)(["\n  from {\n    transform: rotate(0deg);\n  }\n  to {\n    transform: rotate(360deg);\n  }\n"]);return I=function(){return e},e}function S(){let e=(0,a._)(["\n          "," 1s infinite linear\n        "]);return S=function(){return e},e}function C(){let e=(0,a._)(["\n  width: 32px;\n  height: 32px;\n  font-size: 1.5rem;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  flex: 0 0 32px;\n  transition: color 0.3s ease;\n  animation: ",";\n  color: ",";\n"]);return C=function(){return e},e}function E(){let e=(0,a._)(["\n  flex: 1 0 0;\n  padding-left: 8px;\n"]);return E=function(){return e},e}let _=o.default.div(b()),q=o.default.div(j()),A=o.default.div(w(),e=>{let{theme:t}=e;return t.color.background.card.main},e=>{let{themeColor:t}=e;return(0,y.DZ)(.6,t)},e=>{let{phase:t}=e;return"destroying"===t||"request-creation"===t?"scale(0.8) translate(0, 8px)":"scale(1) translate(0, 0)"},e=>{let{phase:t}=e;return"destroying"===t||"request-creation"===t?0:1}),Z=o.default.div(k()),z=(0,r.keyframes)(I()),R=o.default.div(C(),e=>{let{rotateAnimation:t}=e;return t?(0,r.css)(S(),z):"unset"},e=>{let{themeColor:t}=e;return t}),T=o.default.div(E()),H=e=>"info"===e?(0,s.jsx)(d.Z,{}):"warn"===e?(0,s.jsx)(u.Z,{}):"error"===e?(0,s.jsx)(c.Z,{}):"success"===e?(0,s.jsx)(p.Z,{}):"updating"===e?(0,s.jsx)(h.Z,{}):"rare"===e||"epic"===e||"legendary"===e?(0,s.jsx)("img",{src:"https://static.solved.ac/tier_small/item-".concat(e,".svg"),style:{height:"1em"},alt:e}):(0,s.jsx)(d.Z,{}),M=e=>{let t=(0,i.u)();return"info"===e?t.color.text.secondary.main:"warn"===e?t.color.status.warn:"error"===e?t.color.status.error:"success"===e?t.color.status.success:"rare"===e?"#0089f9":"epic"===e?"#8b00e5":"legendary"===e?"#ff7900":"updating"===e?t.color.solvedAc:t.color.text.secondary.main},U=g.forwardRef((e,t)=>{var n,a;let{item:r,phase:i,position:o}=e,d=H(null!==(n=r.severity)&&void 0!==n?n:"info"),u=M(null!==(a=r.severity)&&void 0!==a?a:"info");return(0,s.jsx)(Z,{style:{transform:"translate(0, ".concat(-o,"px)")},children:(0,s.jsxs)(A,{themeColor:u,phase:i,ref:t,children:[(0,s.jsx)(R,{themeColor:u,rotateAnimation:"updating"===r.severity,children:d}),(0,s.jsx)(T,{children:r.message}),(0,s.jsx)(R,{style:{pointerEvents:"all"},themeColor:u,children:(0,s.jsx)(l.zx,{transparent:!0,circle:!0,style:{width:32,height:32,padding:0},onClick:e.dequeue,children:(0,s.jsx)(l.dM,{style:{height:"100%"},children:(0,s.jsx)(f.Z,{style:{width:16,height:16}})})})})]})})});U.displayName="SnackbarItemDisplay";let D=e=>{let{items:t}=e,n=(0,g.useRef)(new Map),[a,r]=(0,g.useState)(!1);(0,g.useEffect)(()=>(r(!0),()=>r(!1)),[]);let[i,o]=(0,g.useState)([]),[l,d]=(0,g.useState)([]),[u,c]=(0,g.useState)([]),[p,h]=(0,g.useState)([]);(0,g.useEffect)(()=>()=>{p.forEach(e=>clearTimeout(e.timeoutId))},[]),(0,g.useEffect)(()=>{o(e=>[...t.filter(t=>void 0===e.find(e=>e.item.id===t.id)).map(e=>({item:e,phase:"request-creation"})),...e.map(e=>({displayed:e,updated:t.find(t=>t.id===e.item.id)})).filter(e=>{let{updated:t}=e;return void 0!==t}).map(e=>{let{displayed:t,updated:n}=e;return{...t,item:{...t.item,value:n.value}}}),...e.filter(e=>void 0===t.find(t=>t.id===e.item.id)).map(e=>({item:e.item,phase:"destroying"}))].sort((e,t)=>e.item.id-t.item.id))},[t]);let f=(0,g.useCallback)((e,t)=>{o(n=>n.map(n=>({...n,phase:n.item.id===e?t:n.phase})))},[o]),m=(0,g.useCallback)(e=>{o(t=>t.filter(t=>t.item.id!==e))},[o]),y=(0,g.useCallback)(e=>{h(t=>t.filter(t=>t.timeoutId!==e))},[h]),b=(0,g.useCallback)(e=>{h(t=>(t.filter(t=>t.itemId===e&&"destroying"!==t.phase).forEach(e=>{clearTimeout(e.timeoutId)}),t.filter(t=>t.itemId!==e)))},[h]),j=(0,g.useCallback)(t=>{b(t),e.dequeue(t)},[b,e]);(0,g.useEffect)(()=>{h(t=>[...t,...i.filter(e=>"request-creation"===e.phase&&!t.find(t=>t.itemId===e.item.id&&"request-creation"===t.phase)).map(e=>{let t=setTimeout(()=>{f(e.item.id,"creating"),y(t)},30);return{itemId:e.item.id,timeoutId:t,phase:"request-creation"}}),...i.filter(e=>"creating"===e.phase&&!t.find(t=>t.itemId===e.item.id&&"creating"===t.phase)).map(e=>{let t=setTimeout(()=>{f(e.item.id,"created"),y(t)},500);return{itemId:e.item.id,timeoutId:t,phase:"creating"}}),...i.filter(e=>"created"===e.phase&&!0!==e.item.value.persist&&!t.find(t=>t.itemId===e.item.id&&"created"===t.phase)).map(t=>{let n=setTimeout(()=>{f(t.item.id,"destroying"),e.dequeue(t.item.id),y(n)},5e3);return{itemId:t.item.id,timeoutId:n,phase:"created"}}),...i.filter(e=>"destroying"===e.phase&&!t.find(t=>t.itemId===e.item.id&&"destroying"===t.phase)).map(e=>{let t=setTimeout(()=>{m(e.item.id),y(t)},500);return{itemId:e.item.id,timeoutId:t,phase:"destroying"}})])},[f,m,i,e,y]);let w=(0,g.useCallback)(()=>{var e;d(i.map(t=>{var s;return{id:t.item.id,height:"destroying"!==t.phase?null!==(e=null===(s=n.current.get(t.item.id))||void 0===s?void 0:s.offsetHeight)&&void 0!==e?e:0:-16}}))},[i,n]),k=(0,g.useCallback)(()=>{c(i.map(e=>({id:e.item.id,position:l.filter(t=>t.id>e.item.id).reduceRight((e,t)=>e+t.height+16,16)})))},[l,i]);(0,g.useEffect)(()=>{w()},[i,w]),(0,g.useEffect)(()=>{k()},[l,k]),(0,g.useEffect)(()=>{let e=v()(()=>{w(),k()},300);return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}},[w,k]);let I=(0,s.jsx)(_,{children:(0,s.jsx)(q,{children:i.map(e=>{var t,a;let{item:r,phase:i}=e,o=e=>(n.current.set(r.id,e),n.current.get(r.id));return(0,s.jsx)(U,{ref:o,item:r.value,phase:i,dequeue:()=>j(r.id),position:null!==(a=null===(t=u.find(e=>e.id===r.id))||void 0===t?void 0:t.position)&&void 0!==a?a:0},r.id.toString())})})});return a?x.createPortal(I,document.body,"snackbar"):null},L=g.createContext(null),N=e=>{let[t,n]=(0,g.useState)(0),[a,r]=(0,g.useState)([]),i=e=>(r(n=>[...n,{id:t,value:e}]),n(e=>e+1),t),o=(e,n)=>{r(s=>[...s.filter(t=>t.id!==e),{id:t,value:n}].sort((e,t)=>e.id-t.id))},l=e=>{r(t=>[...t.filter(t=>t.id!==e)])};return(0,s.jsxs)(L.Provider,{value:{enqueue:i,dequeue:l,update:o},children:[e.children,(0,s.jsx)(D,{items:a,dequeue:l})]})},O=()=>(0,g.useContext)(L)},3196:function(e,t,n){n.d(t,{F:function(){return a}});var s=n(6006);let a=(e,t,n)=>{let a=(0,s.useRef)();return a.current&&t.every((e,t)=>{var n;return Object.is(e,null===(n=a.current)||void 0===n?void 0:n[t])})||(a.current=[...t,...n]),(0,s.useEffect)(e,a.current)}},3328:function(e,t,n){n.d(t,{db:function(){return r}});var s=n(4890),a=n(5650);let r=(0,s.N8)(a.Z)},5650:function(e,t,n){var s=n(1313);t.Z=(0,s.ZF)({apiKey:"AIzaSyBDw41KqGv7uf0mGNZAnL8tCHcigka5GTo",authDomain:"boardgame-cup-party-2023.firebaseapp.com",databaseURL:"https://boardgame-cup-party-2023-default-rtdb.asia-southeast1.firebasedatabase.app",projectId:"boardgame-cup-party-2023",storageBucket:"boardgame-cup-party-2023.appspot.com",messagingSenderId:"98266293147",appId:"1:98266293147:web:69f3ca455edaa16c82b73e"})},1555:function(e,t,n){n.d(t,{Ab:function(){return a},Gs:function(){return r},WR:function(){return s}});let s=(e,t)=>2*e+1-t,a=e=>e*e+e*(e+1)/2,r=(e,t,n)=>10*Math.ceil(s(e,n)/a(e)*t*e)},6628:function(e){e.exports=JSON.parse('[{"handle":"havana723","type":"staff","solves":0},{"handle":"shiftpsh","type":"staff","solves":0},{"handle":"HYEA","type":"staff","solves":0},{"handle":"YouYoung","type":"staff","solves":0},{"handle":"chansol","type":"staff","solves":0},{"handle":"16silver","type":"staff","solves":0},{"handle":"crescent_h","type":"staff","solves":0},{"handle":"pichulia","type":"staff","solves":0},{"handle":"ai4youej","type":"contestant","solves":5},{"handle":"alsrb0504","type":"contestant","solves":6},{"handle":"alswnssl0528","type":"contestant","solves":6},{"handle":"amylo","type":"contestant","solves":5},{"handle":"arietis","type":"contestant","solves":5},{"handle":"asd122032","type":"contestant","solves":4},{"handle":"asdhugh1","type":"contestant","solves":5},{"handle":"atopi0827","type":"contestant","solves":2},{"handle":"Aunps","type":"contestant","solves":2},{"handle":"BothEarRim","type":"contestant","solves":5},{"handle":"cdg0228","type":"contestant","solves":4},{"handle":"cjh970422","type":"contestant","solves":4},{"handle":"djeleanor2","type":"contestant","solves":2},{"handle":"dlalsdn1009","type":"contestant","solves":1},{"handle":"duwang2580","type":"contestant","solves":4},{"handle":"haruki291sa","type":"contestant","solves":6},{"handle":"hijkl2e","type":"contestant","solves":9},{"handle":"hjroh0315","type":"contestant","solves":6},{"handle":"hopedream","type":"contestant","solves":3},{"handle":"ji0513ji","type":"contestant","solves":3},{"handle":"jk410","type":"contestant","solves":7},{"handle":"jshyun912","type":"contestant","solves":3},{"handle":"kimingan","type":"contestant","solves":1},{"handle":"kongum","type":"contestant","solves":3},{"handle":"lambda","type":"contestant","solves":6},{"handle":"maple0118","type":"contestant","solves":1},{"handle":"martinok1103","type":"contestant","solves":7},{"handle":"mjhmjh1104","type":"contestant","solves":7},{"handle":"nowdragon12","type":"contestant","solves":3},{"handle":"nunebin","type":"contestant","solves":5},{"handle":"nureongi0214","type":"contestant","solves":3},{"handle":"old_man_and_the_sea","type":"contestant","solves":6},{"handle":"pani","type":"contestant","solves":6},{"handle":"plan_pt","type":"contestant","solves":3},{"handle":"pridom1118","type":"contestant","solves":3},{"handle":"qwerasdfzxcl","type":"contestant","solves":4},{"handle":"riroan","type":"contestant","solves":6},{"handle":"ruykun","type":"contestant","solves":6},{"handle":"sangchoo1201","type":"contestant","solves":5},{"handle":"sch314","type":"contestant","solves":5},{"handle":"seawon0808","type":"contestant","solves":6},{"handle":"shoo040113","type":"contestant","solves":7},{"handle":"smiley07","type":"contestant","solves":5},{"handle":"star7sss","type":"contestant","solves":1},{"handle":"sunso514","type":"contestant","solves":5},{"handle":"swyjs","type":"contestant","solves":3},{"handle":"tankgewehr","type":"contestant","solves":4},{"handle":"tlsdydaud1","type":"contestant","solves":7},{"handle":"toycartoon","type":"contestant","solves":3},{"handle":"utilforever","type":"contestant","solves":4},{"handle":"vyu","type":"contestant","solves":5},{"handle":"w8385","type":"contestant","solves":5},{"handle":"wanderkind","type":"contestant","solves":2},{"handle":"wapas","type":"contestant","solves":7},{"handle":"wizardrabbit","type":"contestant","solves":7},{"handle":"wnstjd732","type":"contestant","solves":6}]')}}]);