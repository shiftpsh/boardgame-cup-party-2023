"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[966],{6966:function(e,t,n){n.d(t,{HD:function(){return f},aC:function(){return p}});var i=n(9268),r=n(6006);let a=(e,t,n)=>{let i=(0,r.useRef)();return i.current&&t.every((e,t)=>{var n;return Object.is(e,null===(n=i.current)||void 0===n?void 0:n[t])})||(i.current=[...t,...n]),(0,r.useEffect)(e,i.current)};var s=n(3328),u=n(5650),o=n(1313),d=n(4734),l=n(4890),c=n(475);let m=(0,r.createContext)({user:null,isAdmin:!1,signIn:async()=>{},signOut:async()=>{}}),f=e=>{let{children:t}=e,n=(0,c.Ds)(),[f,p]=(0,r.useState)(null),[h,g]=(0,r.useState)(!1),v=(0,r.useRef)(null),x=(0,r.useRef)(null);(0,r.useEffect)(()=>{v.current=(0,d.v0)(u.Z),v.current.languageCode="ko",x.current=new d.hJ},[]),a(()=>{if(!v.current)return;let e=v.current.onAuthStateChanged(async e=>{if(p(e),e)try{let t=await (0,l.U2)((0,l.iH)(s.db,"admin_emails/".concat(e.uid))),i=t.exists();i?g(t.exists()):n.enqueue({message:"관리자 계정이 아닙니다. 다른 관리자에게 요청해 관리자 권한을 획득하세요. UID: ".concat(e.uid),severity:"warn",persist:!0})}catch(e){g(!1)}else g(!1)});return()=>e()},[],[n]),(0,r.useEffect)(()=>{var e;let t=(0,l.jM)((0,l.iH)(s.db,"admin_emails/".concat(null!==(e=null==f?void 0:f.uid)&&void 0!==e?e:"null")),e=>{e.exists()?g(!0):g(!1)});return()=>t()},[null==f?void 0:f.uid]);let y=async()=>{if(v.current&&x.current)try{await (0,d.Fb)(v.current,d.a$);let e=await (0,d.rh)(v.current,x.current),t=e.user;p(t),await (0,l.t8)((0,l.iH)(s.db,"users/".concat(t.uid)),{name:t.displayName,email:t.email,photoURL:t.photoURL}),n.enqueue({message:"로그인되었습니다.",severity:"success"})}catch(e){console.log(e),e instanceof o.ZR?n.enqueue({message:"로그인에 실패했습니다: ".concat(e.message),severity:"error"}):n.enqueue({message:"로그인에 실패했습니다.",severity:"error"})}},b=async()=>{if(v.current)try{await v.current.signOut(),n.enqueue({message:"로그아웃되었습니다.",severity:"success"})}catch(e){console.log(e),e instanceof o.ZR?n.enqueue({message:"로그아웃에 실패했습니다: ".concat(e.message),severity:"error"}):n.enqueue({message:"로그아웃에 실패했습니다.",severity:"error"})}};return(0,i.jsx)(m.Provider,{value:{user:f,isAdmin:h,signIn:y,signOut:b},children:t})},p=()=>(0,r.useContext)(m)},475:function(e,t,n){n.d(t,{wT:function(){return G},Ds:function(){return M}});var i=n(9268),r=n(2805),a=n(2120),s=n(555),u=n(3335),o=n(1835),d=n(8941),l=n(9545),c=n(5157),m=n(3244),f=n(3465),p=n(1460),h=n(6762),g=n.n(h),v=n(4086),x=n(6006),y=n(8431);function b(){let e=(0,r._)(["\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  padding-bottom: 4vh;\n  z-index: 2000000;\n  overflow: hidden;\n  pointer-events: none;\n"]);return b=function(){return e},e}function w(){let e=(0,r._)(["\n  position: relative;\n  height: 100%;\n  width: 600px;\n  max-width: 100%;\n  margin: 0 auto;\n  padding: 16px;\n"]);return w=function(){return e},e}function j(){let e=(0,r._)(["\n  width: 100%;\n  display: flex;\n  padding: 8px;\n  background: ",";\n  border-radius: 4px;\n  box-shadow: "," 0px 8px\n    16px;\n  align-items: center;\n  transition: opacity 0.3s ease, transform 0.3s ease, box-shadow 0.3s ease;\n  transform-origin: bottom;\n  transform: ",";\n  opacity: ",";\n  pointer-events: all;\n"]);return j=function(){return e},e}function I(){let e=(0,r._)(["\n  position: absolute;\n  left: 16px;\n  right: 16px;\n  bottom: 0;\n  transition: transform 0.3s ease;\n"]);return I=function(){return e},e}function C(){let e=(0,r._)(["\n  from {\n    transform: rotate(0deg);\n  }\n  to {\n    transform: rotate(360deg);\n  }\n"]);return C=function(){return e},e}function k(){let e=(0,r._)(["\n          "," 1s infinite linear\n        "]);return k=function(){return e},e}function q(){let e=(0,r._)(["\n  width: 32px;\n  height: 32px;\n  font-size: 1.5rem;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  flex: 0 0 32px;\n  transition: color 0.3s ease;\n  animation: ",";\n  color: ",";\n"]);return q=function(){return e},e}function E(){let e=(0,r._)(["\n  flex: 1 0 0;\n  padding-left: 8px;\n"]);return E=function(){return e},e}let Z=u.default.div(b()),_=u.default.div(w()),S=u.default.div(j(),e=>{let{theme:t}=e;return t.color.background.card.main},e=>{let{themeColor:t}=e;return(0,v.DZ)(.6,t)},e=>{let{phase:t}=e;return"destroying"===t||"request-creation"===t?"scale(0.8) translate(0, 8px)":"scale(1) translate(0, 0)"},e=>{let{phase:t}=e;return"destroying"===t||"request-creation"===t?0:1}),R=u.default.div(I()),D=(0,a.keyframes)(C()),T=u.default.div(q(),e=>{let{rotateAnimation:t}=e;return t?(0,a.css)(k(),D):"unset"},e=>{let{themeColor:t}=e;return t}),A=u.default.div(E()),z=e=>"info"===e?(0,i.jsx)(d.Z,{}):"warn"===e?(0,i.jsx)(l.Z,{}):"error"===e?(0,i.jsx)(c.Z,{}):"success"===e?(0,i.jsx)(m.Z,{}):"updating"===e?(0,i.jsx)(f.Z,{}):"rare"===e||"epic"===e||"legendary"===e?(0,i.jsx)("img",{src:"https://static.solved.ac/tier_small/item-".concat(e,".svg"),style:{height:"1em"},alt:e}):(0,i.jsx)(d.Z,{}),H=e=>{let t=(0,s.u)();return"info"===e?t.color.text.secondary.main:"warn"===e?t.color.status.warn:"error"===e?t.color.status.error:"success"===e?t.color.status.success:"rare"===e?"#0089f9":"epic"===e?"#8b00e5":"legendary"===e?"#ff7900":"updating"===e?t.color.solvedAc:t.color.text.secondary.main},L=x.forwardRef((e,t)=>{var n,r;let{item:a,phase:s,position:u}=e,d=z(null!==(n=a.severity)&&void 0!==n?n:"info"),l=H(null!==(r=a.severity)&&void 0!==r?r:"info");return(0,i.jsx)(R,{style:{transform:"translate(0, ".concat(-u,"px)")},children:(0,i.jsxs)(S,{themeColor:l,phase:s,ref:t,children:[(0,i.jsx)(T,{themeColor:l,rotateAnimation:"updating"===a.severity,children:d}),(0,i.jsx)(A,{children:a.message}),(0,i.jsx)(T,{style:{pointerEvents:"all"},themeColor:l,children:(0,i.jsx)(o.zx,{transparent:!0,circle:!0,style:{width:32,height:32,padding:0},onClick:e.dequeue,children:(0,i.jsx)(o.dM,{style:{height:"100%"},children:(0,i.jsx)(p.Z,{style:{width:16,height:16}})})})})]})})});L.displayName="SnackbarItemDisplay";let N=e=>{let{items:t}=e,n=(0,x.useRef)(new Map),[r,a]=(0,x.useState)(!1);(0,x.useEffect)(()=>(a(!0),()=>a(!1)),[]);let[s,u]=(0,x.useState)([]),[o,d]=(0,x.useState)([]),[l,c]=(0,x.useState)([]),[m,f]=(0,x.useState)([]);(0,x.useEffect)(()=>()=>{m.forEach(e=>clearTimeout(e.timeoutId))},[]),(0,x.useEffect)(()=>{u(e=>[...t.filter(t=>void 0===e.find(e=>e.item.id===t.id)).map(e=>({item:e,phase:"request-creation"})),...e.map(e=>({displayed:e,updated:t.find(t=>t.id===e.item.id)})).filter(e=>{let{updated:t}=e;return void 0!==t}).map(e=>{let{displayed:t,updated:n}=e;return{...t,item:{...t.item,value:n.value}}}),...e.filter(e=>void 0===t.find(t=>t.id===e.item.id)).map(e=>({item:e.item,phase:"destroying"}))].sort((e,t)=>e.item.id-t.item.id))},[t]);let p=(0,x.useCallback)((e,t)=>{u(n=>n.map(n=>({...n,phase:n.item.id===e?t:n.phase})))},[u]),h=(0,x.useCallback)(e=>{u(t=>t.filter(t=>t.item.id!==e))},[u]),v=(0,x.useCallback)(e=>{f(t=>t.filter(t=>t.timeoutId!==e))},[f]),b=(0,x.useCallback)(e=>{f(t=>(t.filter(t=>t.itemId===e&&"destroying"!==t.phase).forEach(e=>{clearTimeout(e.timeoutId)}),t.filter(t=>t.itemId!==e)))},[f]),w=(0,x.useCallback)(t=>{b(t),e.dequeue(t)},[b,e]);(0,x.useEffect)(()=>{f(t=>[...t,...s.filter(e=>"request-creation"===e.phase&&!t.find(t=>t.itemId===e.item.id&&"request-creation"===t.phase)).map(e=>{let t=setTimeout(()=>{p(e.item.id,"creating"),v(t)},30);return{itemId:e.item.id,timeoutId:t,phase:"request-creation"}}),...s.filter(e=>"creating"===e.phase&&!t.find(t=>t.itemId===e.item.id&&"creating"===t.phase)).map(e=>{let t=setTimeout(()=>{p(e.item.id,"created"),v(t)},500);return{itemId:e.item.id,timeoutId:t,phase:"creating"}}),...s.filter(e=>"created"===e.phase&&!0!==e.item.value.persist&&!t.find(t=>t.itemId===e.item.id&&"created"===t.phase)).map(t=>{let n=setTimeout(()=>{p(t.item.id,"destroying"),e.dequeue(t.item.id),v(n)},5e3);return{itemId:t.item.id,timeoutId:n,phase:"created"}}),...s.filter(e=>"destroying"===e.phase&&!t.find(t=>t.itemId===e.item.id&&"destroying"===t.phase)).map(e=>{let t=setTimeout(()=>{h(e.item.id),v(t)},500);return{itemId:e.item.id,timeoutId:t,phase:"destroying"}})])},[p,h,s,e,v]);let j=(0,x.useCallback)(()=>{var e;d(s.map(t=>{var i;return{id:t.item.id,height:"destroying"!==t.phase?null!==(e=null===(i=n.current.get(t.item.id))||void 0===i?void 0:i.offsetHeight)&&void 0!==e?e:0:-16}}))},[s,n]),I=(0,x.useCallback)(()=>{c(s.map(e=>({id:e.item.id,position:o.filter(t=>t.id>e.item.id).reduceRight((e,t)=>e+t.height+16,16)})))},[o,s]);(0,x.useEffect)(()=>{j()},[s,j]),(0,x.useEffect)(()=>{I()},[o,I]),(0,x.useEffect)(()=>{let e=g()(()=>{j(),I()},300);return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}},[j,I]);let C=(0,i.jsx)(Z,{children:(0,i.jsx)(_,{children:s.map(e=>{var t,r;let{item:a,phase:s}=e,u=e=>(n.current.set(a.id,e),n.current.get(a.id));return(0,i.jsx)(L,{ref:u,item:a.value,phase:s,dequeue:()=>w(a.id),position:null!==(r=null===(t=l.find(e=>e.id===a.id))||void 0===t?void 0:t.position)&&void 0!==r?r:0},a.id.toString())})})});return r?y.createPortal(C,document.body,"snackbar"):null},U=x.createContext(null),G=e=>{let[t,n]=(0,x.useState)(0),[r,a]=(0,x.useState)([]),s=e=>(a(n=>[...n,{id:t,value:e}]),n(e=>e+1),t),u=(e,n)=>{a(i=>[...i.filter(t=>t.id!==e),{id:t,value:n}].sort((e,t)=>e.id-t.id))},o=e=>{a(t=>[...t.filter(t=>t.id!==e)])};return(0,i.jsxs)(U.Provider,{value:{enqueue:s,dequeue:o,update:u},children:[e.children,(0,i.jsx)(N,{items:r,dequeue:o})]})},M=()=>(0,x.useContext)(U)},3328:function(e,t,n){n.d(t,{db:function(){return a}});var i=n(4890),r=n(5650);let a=(0,i.N8)(r.Z)},5650:function(e,t,n){var i=n(1313);t.Z=(0,i.ZF)({apiKey:"AIzaSyBDw41KqGv7uf0mGNZAnL8tCHcigka5GTo",authDomain:"boardgame-cup-party-2023.firebaseapp.com",databaseURL:"https://boardgame-cup-party-2023-default-rtdb.asia-southeast1.firebasedatabase.app",projectId:"boardgame-cup-party-2023",storageBucket:"boardgame-cup-party-2023.appspot.com",messagingSenderId:"98266293147",appId:"1:98266293147:web:69f3ca455edaa16c82b73e"})}}]);