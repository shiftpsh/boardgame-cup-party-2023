(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[460],{2166:function(e,s,n){"use strict";n.d(s,{Z:function(){return t}});var t=(0,n(777).Z)("trash","IconTrash",[["path",{d:"M4 7l16 0",key:"svg-0"}],["path",{d:"M10 11l0 6",key:"svg-1"}],["path",{d:"M14 11l0 6",key:"svg-2"}],["path",{d:"M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12",key:"svg-3"}],["path",{d:"M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3",key:"svg-4"}]])},6976:function(e,s,n){Promise.resolve().then(n.bind(n,9658))},9658:function(e,s,n){"use strict";n.r(s),n.d(s,{default:function(){return k}});var t=n(9268),i=n(5002),r=n(6866),l=n(3328),d=n(1835),a=n(8941),c=n(4890),h=n(5846),u=n.n(h),x=n(6006),o=n(475),j=n(5873),m=n(1313),f=n(2805),v=n(3335);function g(){let e=(0,f._)(["\n  width: 32px;\n  height: 32px;\n  border-radius: 50%;\n"]);return g=function(){return e},e}function p(){let e=(0,f._)(["\n  display: flex;\n  align-items: center;\n  gap: 0 16px;\n"]);return p=function(){return e},e}let y=v.default.img(g()),b=v.default.div(p()),w=e=>{let{adminUIDs:s,users:n}=e,i=(0,o.Ds)(),[r,a]=(0,x.useState)(""),h=(0,x.useMemo)(()=>new Set(s),[s]),u=(0,x.useMemo)(()=>{let e=r.toLocaleLowerCase();return Array.from(n.values()).filter(s=>!h.has(s.uid)&&!!(s.email.toLocaleLowerCase().includes(e)||s.name.toLocaleLowerCase().includes(e)||s.uid.toLocaleLowerCase().includes(e)))},[h,r,n]),f=async e=>{try{await (0,c.t8)((0,c.iH)(l.db,"admin_emails/"+e),!0),i.enqueue({message:"관리자를 추가했습니다.",severity:"success"})}catch(e){console.error(e),e instanceof m.ZR?i.enqueue({message:"관리자 추가에 실패했습니다: ".concat(e.message),severity:"error"}):i.enqueue({message:"관리자 추가에 실패했습니다.",severity:"error"})}};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(d.qo,{fullWidth:!0,placeholder:"이메일, 이름, UID, ...",value:r,onChange:e=>a(e.target.value)}),(0,t.jsx)(d.Jd,{h3:!0,children:"검색 결과"}),0===u.length?(0,t.jsx)(d.at,{children:"검색 결과가 없습니다."}):(0,t.jsx)(d.xJ,{children:(0,t.jsxs)(d.iA,{fullWidth:!0,children:[(0,t.jsx)(d.ss,{children:(0,t.jsxs)(d.X2,{children:[(0,t.jsx)(d.bL,{width:"60%",children:"이름"}),(0,t.jsx)(d.bL,{width:"20%",children:"UID"}),(0,t.jsx)(d.bL,{width:"20%",children:"추가"})]})}),(0,t.jsx)(d.RM,{children:u.map(e=>{let{uid:s}=e;return(0,t.jsxs)(d.X2,{children:[(0,t.jsx)(d.bL,{style:{verticalAlign:"middle"},children:(0,t.jsxs)(b,{children:[(0,t.jsx)(y,{src:e.photoURL,alt:e.name+"의 프로필 사진"}),(0,t.jsxs)("div",{children:[e.name,(0,t.jsx)("br",{}),(0,t.jsx)(d.Jd,{description:!0,small:!0,children:e.email})]})]})}),(0,t.jsx)(d.bL,{style:{verticalAlign:"middle"},children:(0,t.jsx)(d.Jd,{small:!0,children:s})}),(0,t.jsx)(d.bL,{children:(0,t.jsx)(d.zx,{fullWidth:!0,transparent:!0,onClick:()=>f(s),children:(0,t.jsx)(j.Z,{})})})]},s)})})]})})]})};var L=n(2166);let T=e=>{let{adminUIDs:s,users:n}=e,r=(0,i.aC)(),a=(0,o.Ds)(),h=async e=>{try{await (0,c.Od)((0,c.iH)(l.db,"admin_emails/"+e)),a.enqueue({message:"관리자를 삭제했습니다.",severity:"success"})}catch(e){console.error(e),e instanceof m.ZR?a.enqueue({message:"관리자 삭제에 실패했습니다: ".concat(e.message),severity:"error"}):a.enqueue({message:"관리자 삭제에 실패했습니다.",severity:"error"})}};return s.length?(0,t.jsx)(d.xJ,{children:(0,t.jsxs)(d.iA,{fullWidth:!0,children:[(0,t.jsx)(d.ss,{children:(0,t.jsxs)(d.X2,{children:[(0,t.jsx)(d.bL,{width:"60%",children:"이름"}),(0,t.jsx)(d.bL,{width:"20%",children:"UID"}),(0,t.jsx)(d.bL,{width:"20%",children:"삭제"})]})}),(0,t.jsx)(d.RM,{children:s.map(e=>{var s,i;let l=n.get(e);return(0,t.jsxs)(d.X2,{children:[l?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(d.bL,{style:{verticalAlign:"middle"},children:(0,t.jsxs)(b,{children:[(0,t.jsx)(y,{src:l.photoURL,alt:l.name+"의 프로필 사진"}),(0,t.jsxs)("div",{children:[l.name,(null==r?void 0:null===(s=r.user)||void 0===s?void 0:s.uid)===e&&(0,t.jsxs)(t.Fragment,{children:[" ",(0,t.jsx)(d.Jd,{description:!0,children:"(나)"})]}),(0,t.jsx)("br",{}),(0,t.jsx)(d.Jd,{description:!0,small:!0,children:l.email})]})]})}),(0,t.jsx)(d.bL,{style:{verticalAlign:"middle"},children:(0,t.jsx)(d.Jd,{small:!0,children:e})})]}):(0,t.jsx)(d.bL,{colSpan:2,children:(0,t.jsx)(d.Jd,{description:!0,children:e})}),(0,t.jsx)(d.bL,{children:(null==r?void 0:null===(i=r.user)||void 0===i?void 0:i.uid)!==e&&(0,t.jsx)(d.zx,{fullWidth:!0,transparent:!0,onClick:()=>h(e),children:(0,t.jsx)(L.Z,{})})})]},e)})})]})}):(0,t.jsx)(d.at,{children:"관리자가 없습니다."})};function k(){let e=(0,i.aC)(),[s,n]=(0,r.Z)(),h=6e4*new Date().getTimezoneOffset(),o=new Date(s-h).toISOString(),[j,m]=(0,x.useState)([]),[f,v]=(0,x.useState)(new Map);(0,x.useEffect)(()=>{if(!e.user)return;let s=(0,c.jM)((0,c.iH)(l.db,"admin_emails"),e=>{let s=[];e.forEach(e=>{e.key&&s.push(e.key)}),m(s)});return s},[e.user]),(0,x.useEffect)(()=>{let e=(0,c.jM)((0,c.iH)(l.db,"users"),e=>{let s=new Map;e.forEach(e=>{e.key&&s.set(e.key,{...e.val(),uid:e.key})}),v(s)});return e},[]);let g=e=>{let s=e.target.value,t=o.split("T")[1].slice(0,5);n(new Date("".concat(s,"T").concat(t,"+09:00")).getTime())},p=e=>{let s=o.split("T")[0],t=e.target.value;n(new Date("".concat(s,"T").concat(t,"+09:00")).getTime())};return e.isAdmin?(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)(d.W2,{children:[(0,t.jsx)(d.T,{h:32}),(0,t.jsx)(d.Jd,{h2:!0,children:"프리즈"}),(0,t.jsxs)("div",{style:{display:"flex",gap:"0 8px"},children:[(0,t.jsx)(d.qo,{type:"date",value:o.split("T")[0],onChange:g,fullWidth:!0}),(0,t.jsx)(d.qo,{type:"time",value:o.split("T")[1].slice(0,5),onChange:p,fullWidth:!0})]}),(0,t.jsx)(d.T,{h:32}),(0,t.jsx)(d.Jd,{h2:!0,children:"어워드 모드"}),(0,t.jsx)(d.T,{h:8}),(0,t.jsx)(u(),{href:"/?award=true",children:(0,t.jsx)(d.zx,{fullWidth:!0,children:"어워드 모드"})}),(0,t.jsx)(d.T,{h:8}),(0,t.jsxs)(d.Jd,{description:!0,children:[(0,t.jsx)(a.Z,{})," 키보드 버튼 Space를 눌러 진행할 수 있습니다."]}),(0,t.jsx)(d.T,{h:32}),(0,t.jsx)(d.Jd,{h2:!0,children:"관리자 목록"}),(0,t.jsx)(T,{adminUIDs:j,users:f}),(0,t.jsx)(d.T,{h:32}),(0,t.jsx)(d.Jd,{h2:!0,children:"새 관리자 추가"}),(0,t.jsx)(w,{adminUIDs:j,users:f}),(0,t.jsx)(d.T,{h:32})]})}):(0,t.jsx)(d.W2,{children:(0,t.jsx)(d.at,{children:"관리자가 아닙니다."})})}},6866:function(e,s,n){"use strict";var t=n(3328),i=n(4890),r=n(6006);let l=()=>{let[e,s]=(0,r.useState)(1683963e6);(0,r.useEffect)(()=>{let e=(0,i.jM)((0,i.iH)(t.db,"freeze"),e=>{e.exists()&&s(e.val())});return()=>e()},[]);let n=async e=>{await (0,i.t8)((0,i.iH)(t.db,"freeze"),e)};return[e,n]};s.Z=l}},function(e){e.O(0,[169,454,759,770,697,459,392,445,2,667,139,744],function(){return e(e.s=6976)}),_N_E=e.O()}]);