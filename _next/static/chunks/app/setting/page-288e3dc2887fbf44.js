(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[460],{2166:function(e,s,n){"use strict";n.d(s,{Z:function(){return t}});var t=(0,n(777).Z)("trash","IconTrash",[["path",{d:"M4 7l16 0",key:"svg-0"}],["path",{d:"M10 11l0 6",key:"svg-1"}],["path",{d:"M14 11l0 6",key:"svg-2"}],["path",{d:"M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12",key:"svg-3"}],["path",{d:"M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3",key:"svg-4"}]])},6976:function(e,s,n){Promise.resolve().then(n.bind(n,9658))},9658:function(e,s,n){"use strict";n.r(s),n.d(s,{default:function(){return w}});var t=n(9268),i=n(6966),l=n(6866),r=n(3328),a=n(1835),d=n(4890),c=n(6006),h=n(475),u=n(5873),o=n(1313),x=n(2805),j=n(3335);function m(){let e=(0,x._)(["\n  width: 32px;\n  height: 32px;\n  border-radius: 50%;\n"]);return m=function(){return e},e}function f(){let e=(0,x._)(["\n  display: flex;\n  align-items: center;\n  gap: 0 16px;\n"]);return f=function(){return e},e}let v=j.default.img(m()),g=j.default.div(f()),p=e=>{let{adminUIDs:s,users:n}=e,i=(0,h.Ds)(),[l,x]=(0,c.useState)(""),j=(0,c.useMemo)(()=>new Set(s),[s]),m=(0,c.useMemo)(()=>{let e=l.toLocaleLowerCase();return Array.from(n.values()).filter(s=>!j.has(s.uid)&&!!(s.email.toLocaleLowerCase().includes(e)||s.name.toLocaleLowerCase().includes(e)||s.uid.toLocaleLowerCase().includes(e)))},[j,l,n]),f=async e=>{try{await (0,d.t8)((0,d.iH)(r.db,"admin_emails/"+e),!0),i.enqueue({message:"관리자를 추가했습니다.",severity:"success"})}catch(e){console.error(e),e instanceof o.ZR?i.enqueue({message:"관리자 추가에 실패했습니다: ".concat(e.message),severity:"error"}):i.enqueue({message:"관리자 추가에 실패했습니다.",severity:"error"})}};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(a.qo,{fullWidth:!0,placeholder:"이메일, 이름, UID, ...",value:l,onChange:e=>x(e.target.value)}),(0,t.jsx)(a.Jd,{h3:!0,children:"검색 결과"}),0===m.length?(0,t.jsx)(a.at,{children:"검색 결과가 없습니다."}):(0,t.jsx)(a.xJ,{children:(0,t.jsxs)(a.iA,{fullWidth:!0,children:[(0,t.jsx)(a.ss,{children:(0,t.jsxs)(a.X2,{children:[(0,t.jsx)(a.bL,{width:"60%",children:"이름"}),(0,t.jsx)(a.bL,{width:"20%",children:"UID"}),(0,t.jsx)(a.bL,{width:"20%",children:"추가"})]})}),(0,t.jsx)(a.RM,{children:m.map(e=>{let{uid:s}=e;return(0,t.jsxs)(a.X2,{children:[(0,t.jsx)(a.bL,{style:{verticalAlign:"middle"},children:(0,t.jsxs)(g,{children:[(0,t.jsx)(v,{src:e.photoURL,alt:e.name+"의 프로필 사진"}),(0,t.jsxs)("div",{children:[e.name,(0,t.jsx)("br",{}),(0,t.jsx)(a.Jd,{description:!0,small:!0,children:e.email})]})]})}),(0,t.jsx)(a.bL,{style:{verticalAlign:"middle"},children:(0,t.jsx)(a.Jd,{small:!0,children:s})}),(0,t.jsx)(a.bL,{children:(0,t.jsx)(a.zx,{fullWidth:!0,transparent:!0,onClick:()=>f(s),children:(0,t.jsx)(u.Z,{})})})]},s)})})]})})]})};var y=n(2166);let b=e=>{let{adminUIDs:s,users:n}=e,l=(0,i.aC)(),c=(0,h.Ds)(),u=async e=>{try{await (0,d.Od)((0,d.iH)(r.db,"admin_emails/"+e)),c.enqueue({message:"관리자를 삭제했습니다.",severity:"success"})}catch(e){console.error(e),e instanceof o.ZR?c.enqueue({message:"관리자 삭제에 실패했습니다: ".concat(e.message),severity:"error"}):c.enqueue({message:"관리자 삭제에 실패했습니다.",severity:"error"})}};return s.length?(0,t.jsx)(a.xJ,{children:(0,t.jsxs)(a.iA,{fullWidth:!0,children:[(0,t.jsx)(a.ss,{children:(0,t.jsxs)(a.X2,{children:[(0,t.jsx)(a.bL,{width:"60%",children:"이름"}),(0,t.jsx)(a.bL,{width:"20%",children:"UID"}),(0,t.jsx)(a.bL,{width:"20%",children:"삭제"})]})}),(0,t.jsx)(a.RM,{children:s.map(e=>{var s,i;let r=n.get(e);return(0,t.jsxs)(a.X2,{children:[r?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(a.bL,{style:{verticalAlign:"middle"},children:(0,t.jsxs)(g,{children:[(0,t.jsx)(v,{src:r.photoURL,alt:r.name+"의 프로필 사진"}),(0,t.jsxs)("div",{children:[r.name,(null==l?void 0:null===(s=l.user)||void 0===s?void 0:s.uid)===e&&(0,t.jsxs)(t.Fragment,{children:[" ",(0,t.jsx)(a.Jd,{description:!0,children:"(나)"})]}),(0,t.jsx)("br",{}),(0,t.jsx)(a.Jd,{description:!0,small:!0,children:r.email})]})]})}),(0,t.jsx)(a.bL,{style:{verticalAlign:"middle"},children:(0,t.jsx)(a.Jd,{small:!0,children:e})})]}):(0,t.jsx)(a.bL,{colSpan:2,children:(0,t.jsx)(a.Jd,{description:!0,children:e})}),(0,t.jsx)(a.bL,{children:(null==l?void 0:null===(i=l.user)||void 0===i?void 0:i.uid)!==e&&(0,t.jsx)(a.zx,{fullWidth:!0,transparent:!0,onClick:()=>u(e),children:(0,t.jsx)(y.Z,{})})})]},e)})})]})}):(0,t.jsx)(a.at,{children:"관리자가 없습니다."})};function w(){let e=(0,i.aC)(),[s,n]=(0,l.Z)(),h=6e4*new Date().getTimezoneOffset(),u=new Date(s-h).toISOString(),[o,x]=(0,c.useState)([]),[j,m]=(0,c.useState)(new Map);(0,c.useEffect)(()=>{if(!e.user)return;let s=(0,d.jM)((0,d.iH)(r.db,"admin_emails"),e=>{let s=[];e.forEach(e=>{e.key&&s.push(e.key)}),x(s)});return s},[e.user]),(0,c.useEffect)(()=>{let e=(0,d.jM)((0,d.iH)(r.db,"users"),e=>{let s=new Map;e.forEach(e=>{e.key&&s.set(e.key,{...e.val(),uid:e.key})}),m(s)});return e},[]);let f=e=>{let s=e.target.value,t=u.split("T")[1].slice(0,5);n(new Date("".concat(s,"T").concat(t,"+09:00")).getTime())},v=e=>{let s=u.split("T")[0],t=e.target.value;n(new Date("".concat(s,"T").concat(t,"+09:00")).getTime())};return e.isAdmin?(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)(a.W2,{children:[(0,t.jsx)(a.T,{h:32}),(0,t.jsx)(a.Jd,{h2:!0,children:"프리즈"}),(0,t.jsxs)("div",{style:{display:"flex",gap:"0 8px"},children:[(0,t.jsx)(a.qo,{type:"date",value:u.split("T")[0],onChange:f,fullWidth:!0}),(0,t.jsx)(a.qo,{type:"time",value:u.split("T")[1].slice(0,5),onChange:v,fullWidth:!0})]}),(0,t.jsx)(a.T,{h:32}),(0,t.jsx)(a.Jd,{h2:!0,children:"관리자 목록"}),(0,t.jsx)(b,{adminUIDs:o,users:j}),(0,t.jsx)(a.T,{h:32}),(0,t.jsx)(a.Jd,{h2:!0,children:"새 관리자 추가"}),(0,t.jsx)(p,{adminUIDs:o,users:j}),(0,t.jsx)(a.T,{h:32})]})}):(0,t.jsx)(a.W2,{children:(0,t.jsx)(a.at,{children:"관리자가 아닙니다."})})}},6866:function(e,s,n){"use strict";var t=n(3328),i=n(4890),l=n(6006);let r=()=>{let[e,s]=(0,l.useState)(1683963e6);(0,l.useEffect)(()=>{let e=(0,i.jM)((0,i.iH)(t.db,"freeze"),e=>{e.exists()&&s(e.val())});return()=>e()},[]);let n=async e=>{await (0,i.t8)((0,i.iH)(t.db,"freeze"),e)};return[e,n]};s.Z=r}},function(e){e.O(0,[169,759,770,697,294,754,435,966,667,139,744],function(){return e(e.s=6976)}),_N_E=e.O()}]);