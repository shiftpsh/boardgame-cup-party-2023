(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[37],{608:function(e,t,n){Promise.resolve().then(n.bind(n,1356))},1356:function(e,t,n){"use strict";n.r(t);var s=n(2805),a=n(9268),l=n(1835),i=n(6006),o=n(6628),d=n(4945),r=n(6649),c=n(6966),m=n(475),h=n(2665),u=n(6192),p=n(3328),y=n(9519),v=n(1555),x=n(3335),f=n(8941),j=n(2166),g=n(5873),b=n(1313),k=n(4890),P=n(6008),w=n(3785);function T(){let e=(0,s._)(["\n  display: block;\n"]);return T=function(){return e},e}function _(){let e=(0,s._)(["\n  display: grid;\n  grid-template-columns: 1fr 2fr 1fr 1fr;\n"]);return _=function(){return e},e}let A=(0,x.default)(l.RM)(T()),Z=(0,x.default)(l.X2)(_()),E=e=>{let t=(0,c.aC)(),n=(0,m.Ds)(),s=(0,u.Z)(),x=(0,P.useSearchParams)(),T=x.get("uuid")||"",[_,E]=(0,i.useState)([]),[S,J]=(0,i.useState)(!1),D=(0,i.useMemo)(()=>s.find(e=>e.uuid===T),[s,T]),L=(0,y.r)((null==D?void 0:D.gameId)||"custom"),O=(0,h.Z)((null==D?void 0:D.startedAt)||Date.now()),C=D&&"finishedAt"in D?D.finishedAt-D.startedAt:O,W=Math.floor(C/1e3/60),M=e=>{E(t=>t.filter(t=>t.handle!==e).map((e,t)=>({...e,rank:t+1})))},N=e=>{let{destination:t,source:n}=e;t&&t.index!==n.index&&E(e=>{let s=[...e],[a]=s.splice(n.index,1);return s.splice(t.index,0,a),s.map((e,t)=>({...e,rank:t+1}))})},R=async()=>{if(S||!D)return;J(!0);let e=Date.now();try{await (0,k.t8)((0,k.iH)(p.db,"games/".concat(D.uuid)),{...D,finishedAt:e,durationMinutes:W,result:_}),n.enqueue({message:"게임 결과가 추가되었습니다.",severity:"success"})}catch(e){e instanceof b.ZR?n.enqueue({message:"게임 결과 추가에 실패했습니다: ".concat(e.message),severity:"error"}):n.enqueue({message:"게임 결과 추가에 실패했습니다.",severity:"error"})}J(!1)};return((0,i.useEffect)(()=>{if(!D){E([]);return}if("result"in D)E(D.result);else{let e=(null==D?void 0:D.players)||[];E(e.map(e=>o.find(t=>t.handle===e)).filter(e=>void 0!==e).map((e,t)=>({handle:e.handle,rank:t+1,exclude:"staff"===e.type})))}},[D,null==D?void 0:D.players]),t.isAdmin)?D?(0,a.jsxs)(l.W2,{children:[(0,a.jsx)(l.T,{h:64}),(0,a.jsx)(l.Jd,{h4:!0,as:"h2",children:"게임"}),(0,a.jsxs)("span",{children:[(0,a.jsx)(r.Z,{emoji:L.emoji})," ",L.name]}),(0,a.jsx)(l.T,{h:16}),(0,a.jsx)(l.Jd,{h4:!0,as:"h2",children:"플레이 시간"}),W,"분 ",Math.floor(C/1e3)%60,"초",(0,a.jsx)(l.T,{h:16}),(0,a.jsxs)(l.Jd,{h4:!0,as:"h2",children:["게임 결과"," ",(0,a.jsxs)(l.Jd,{description:!0,style:{fontWeight:"normal"},children:[(0,a.jsx)(f.Z,{})," ",_.length,"명"]})]}),(0,a.jsx)(l.T,{h:16}),0===_.length?(0,a.jsx)(l.at,{children:"게임 결과를 입력하지 않았습니다."}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(l.iA,{fullWidth:!0,padding:"dense",children:[(0,a.jsx)(l.ss,{children:(0,a.jsxs)(Z,{children:[(0,a.jsx)(l.bL,{children:"순위"}),(0,a.jsx)(l.bL,{children:"핸들"}),(0,a.jsx)(l.bL,{children:"점수"}),(0,a.jsx)(l.bL,{children:"삭제"})]})}),(0,a.jsx)(w.Z5,{onDragEnd:N,children:(0,a.jsx)(w.bK,{droppableId:"list",children:(e,t)=>(0,a.jsxs)(A,{ref:e.innerRef,...e.droppableProps,children:[_.map(e=>(0,a.jsx)(w._l,{draggableId:e.handle,index:e.rank-1,children:(t,n)=>(0,a.jsxs)(Z,{ref:t.innerRef,...t.draggableProps,...t.dragHandleProps,style:{...t.draggableProps.style,...t.draggableProps.style},children:[(0,a.jsx)(l.bL,{style:{textAlign:"center"},children:(0,a.jsxs)(l.Jd,{tabular:!0,style:{verticalAlign:"middle"},children:[e.rank,"위"]})}),(0,a.jsx)(l.bL,{children:(0,a.jsx)(l.Jd,{ellipsis:!0,description:e.exclude,style:{verticalAlign:"middle"},children:e.handle})}),(0,a.jsx)(l.bL,{style:{textAlign:"right"},children:(0,a.jsx)(l.Jd,{tabular:!0,style:{verticalAlign:"middle"},children:(0,a.jsx)(d.Z,{value:e.exclude?0:(0,v.Gs)(_.length,W,e.rank)})})}),(0,a.jsx)(l.bL,{padding:"none",children:(0,a.jsx)(l.zx,{onClick:()=>M(e.handle),fullWidth:!0,transparent:!0,children:(0,a.jsx)(j.Z,{})})})]})},e.handle)),e.placeholder]})})})]}),(0,a.jsx)(l.T,{h:32}),(0,a.jsxs)(l.zx,{fullWidth:!0,disabled:S,onClick:R,children:[(0,a.jsx)(g.Z,{})," 기록 (",L.name,", ",W,"분, ",_.length,"명)"]})]}),(0,a.jsx)(l.T,{h:64})]}):(0,a.jsx)(l.W2,{children:(0,a.jsx)(l.at,{children:"게임을 찾을 수 없습니다."})}):(0,a.jsx)(l.W2,{children:(0,a.jsx)(l.at,{children:"관리자가 아닙니다."})})};t.default=E},4945:function(e,t,n){"use strict";var s=n(9268),a=n(4355),l=n(5569),i=n(6006);let o=e=>e.toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:0}),d=e=>{let{value:t,format:n=o}=e,d=(0,i.useRef)(null),r=(0,a.c)(0),c=(0,l.q)(r);return(0,i.useEffect)(()=>{r.set(t)},[r,t]),(0,i.useEffect)(()=>c.onChange(e=>{d.current&&(d.current.textContent=n(e))}),[n,c]),(0,s.jsx)("span",{ref:d,children:n(t)})};t.Z=d},6649:function(e,t,n){"use strict";var s=n(2805),a=n(9268),l=n(3335),i=n(1527);function o(){let e=(0,s._)(["\n  height: 1.2em;\n  width: 1.2em;\n  margin: 0 0.05em 0 0.1em;\n  vertical-align: -0.25em;\n"]);return o=function(){return e},e}let d=e=>"https://twemoji.maxcdn.com/v/latest/72x72/".concat(e,".png"),r=l.default.img(o()),c=e=>{let{emoji:t}=e;return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(r,{src:d(i.Z.convert.toCodePoint(t)),alt:t})})};t.Z=c},2665:function(e,t,n){"use strict";var s=n(6006);let a=e=>{let[t,n]=(0,s.useState)(Date.now()),[a,l]=(0,s.useState)(0);return(0,s.useEffect)(()=>{let e=setInterval(()=>{n(Date.now())},1e3);return()=>{clearInterval(e)}},[]),(0,s.useEffect)(()=>{e instanceof Date?l(t-e.getTime()):l(t-e)},[t,e]),a};t.Z=a},6192:function(e,t,n){"use strict";var s=n(3328),a=n(4890),l=n(6006);let i=()=>{let[e,t]=(0,l.useState)([]);return(0,l.useEffect)(()=>{let e=(0,a.jM)((0,a.iH)(s.db,"games"),e=>{if(e.exists()){let n=e.toJSON();t(Object.values(n).map(e=>({...e,players:Object.values(e.players),..."result"in e?{result:Object.values(e.result)}:{}})))}});return()=>e()},[]),e};t.Z=i},9519:function(e,t,n){"use strict";n.d(t,{r:function(){return a}});var s=n(3383);let a=e=>s.find(t=>t.id===e)},1555:function(e,t,n){"use strict";n.d(t,{Ab:function(){return a},Gs:function(){return l},WR:function(){return s}});let s=(e,t)=>2*e+1-t,a=e=>e*e+e*(e+1)/2,l=(e,t,n)=>10*Math.ceil(s(e,n)/a(e)*t*e)},3383:function(e){"use strict";e.exports=JSON.parse('[{"id":"terraforming-mars","name":"테라포밍 마스","emoji":"\uD83C\uDF0D","players":{"min":1,"max":5},"estimatedPlayTime":{"min":90,"max":120}},{"id":"sakura-arms","name":"벚꽃 내리는 시대에 결투를","emoji":"\uD83C\uDF38","players":{"min":2,"max":2},"estimatedPlayTime":{"min":10,"max":20}},{"id":"halli-galli","name":"할리갈리","emoji":"\uD83C\uDF4B","players":{"min":2,"max":7},"estimatedPlayTime":{"min":5,"max":15}},{"id":"chess","name":"체스","emoji":"♟","players":{"min":2,"max":2},"estimatedPlayTime":{"min":30,"max":60}},{"id":"crazy-time","name":"크레이지 타임","emoji":"\uD83D\uDD70","players":{"min":3,"max":14},"estimatedPlayTime":{"min":20,"max":30}},{"id":"dominion","name":"도미니언","emoji":"\uD83C\uDFF0","players":{"min":2,"max":4},"estimatedPlayTime":{"min":30,"max":40}},{"id":"splendor","name":"스플렌더","emoji":"\uD83D\uDC8E","players":{"min":2,"max":4},"estimatedPlayTime":{"min":20,"max":30}},{"id":"yacht-dice","name":"요트 다이스","emoji":"\uD83C\uDFB2","players":{"min":1,"max":20},"estimatedPlayTime":{"min":5,"max":20}},{"id":"no-thanks","name":"노 땡스!","emoji":"\uD83D\uDE45‍♂️","players":{"min":3,"max":7},"estimatedPlayTime":{"min":20,"max":30}},{"id":"uno","name":"UNO","emoji":"\uD83C\uDCCF","players":{"min":2,"max":10},"estimatedPlayTime":{"min":20,"max":30}},{"id":"bang","name":"뱅!","emoji":"\uD83D\uDD2B","players":{"min":4,"max":7},"estimatedPlayTime":{"min":20,"max":40}},{"id":"zenga","name":"젠가","emoji":"\uD83D\uDCE6","players":{"min":1,"max":8},"estimatedPlayTime":{"min":5,"max":20}},{"id":"richii-mahjong","name":"리치 마작","emoji":"\uD83C\uDC04","players":{"min":3,"max":4},"estimatedPlayTime":{"min":30,"max":60}},{"id":"custom","name":"직접 입력","emoji":"\uD83D\uDCDD","players":{"min":1,"max":20},"estimatedPlayTime":{"min":5,"max":120}}]')},6628:function(e){"use strict";e.exports=JSON.parse('[{"handle":"havana723","type":"staff","solves":0},{"handle":"shiftpsh","type":"staff","solves":0},{"handle":"HYEA","type":"staff","solves":0},{"handle":"YouYoung","type":"staff","solves":0},{"handle":"chansol","type":"staff","solves":0},{"handle":"16silver","type":"staff","solves":0},{"handle":"crescent_h","type":"staff","solves":0},{"handle":"pichulia","type":"staff","solves":0},{"handle":"ai4youej","type":"contestant","solves":5},{"handle":"alsrb0504","type":"contestant","solves":6},{"handle":"alswnssl0528","type":"contestant","solves":6},{"handle":"amylo","type":"contestant","solves":5},{"handle":"arietis","type":"contestant","solves":5},{"handle":"asd122032","type":"contestant","solves":4},{"handle":"asdhugh1","type":"contestant","solves":5},{"handle":"atopi0827","type":"contestant","solves":2},{"handle":"Aunps","type":"contestant","solves":2},{"handle":"BothEarRim","type":"contestant","solves":5},{"handle":"cdg0228","type":"contestant","solves":4},{"handle":"cjh970422","type":"contestant","solves":4},{"handle":"djeleanor2","type":"contestant","solves":2},{"handle":"dlalsdn1009","type":"contestant","solves":1},{"handle":"duwang2580","type":"contestant","solves":4},{"handle":"haruki291sa","type":"contestant","solves":6},{"handle":"hijkl2e","type":"contestant","solves":9},{"handle":"hjroh0315","type":"contestant","solves":6},{"handle":"hopedream","type":"contestant","solves":3},{"handle":"ji0513ji","type":"contestant","solves":3},{"handle":"jk410","type":"contestant","solves":7},{"handle":"jshyun912","type":"contestant","solves":3},{"handle":"kimingan","type":"contestant","solves":1},{"handle":"kongum","type":"contestant","solves":3},{"handle":"lambda","type":"contestant","solves":6},{"handle":"maple0118","type":"contestant","solves":1},{"handle":"martinok1103","type":"contestant","solves":7},{"handle":"mjhmjh1104","type":"contestant","solves":7},{"handle":"nowdragon12","type":"contestant","solves":3},{"handle":"nunebin","type":"contestant","solves":5},{"handle":"nureongi0214","type":"contestant","solves":3},{"handle":"old_man_and_the_sea","type":"contestant","solves":6},{"handle":"pani","type":"contestant","solves":6},{"handle":"plan_pt","type":"contestant","solves":3},{"handle":"pridom1118","type":"contestant","solves":3},{"handle":"qwerasdfzxcl","type":"contestant","solves":4},{"handle":"riroan","type":"contestant","solves":6},{"handle":"ruykun","type":"contestant","solves":6},{"handle":"sangchoo1201","type":"contestant","solves":5},{"handle":"sch314","type":"contestant","solves":5},{"handle":"seawon0808","type":"contestant","solves":6},{"handle":"shoo040113","type":"contestant","solves":7},{"handle":"smiley07","type":"contestant","solves":5},{"handle":"star7sss","type":"contestant","solves":1},{"handle":"sunso514","type":"contestant","solves":5},{"handle":"swyjs","type":"contestant","solves":3},{"handle":"tankgewehr","type":"contestant","solves":4},{"handle":"tlsdydaud1","type":"contestant","solves":7},{"handle":"toycartoon","type":"contestant","solves":3},{"handle":"utilforever","type":"contestant","solves":4},{"handle":"vyu","type":"contestant","solves":5},{"handle":"w8385","type":"contestant","solves":5},{"handle":"wanderkind","type":"contestant","solves":2},{"handle":"wapas","type":"contestant","solves":7},{"handle":"wizardrabbit","type":"contestant","solves":7},{"handle":"wnstjd732","type":"contestant","solves":6}]')}},function(e){e.O(0,[169,454,759,770,697,133,459,392,775,257,966,667,139,744],function(){return e(e.s=608)}),_N_E=e.O()}]);